<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="google-site-verification"
      content="w75-P-0ywXWkyZvYPbkSM3VSM2hny25UrfeiWJt3B1k"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta
      name="description"
      content="Front-end developer and designer. ReasonML, ReasonReact, ReactJS."
    />
    <meta name="twitter:card" content="summary_large_image">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://bloodyowl.io/public/assets/images/share.jpg">
    <meta name="twitter:image" content="https://bloodyowl.io/public/assets/images/share.jpg">
    <meta name="twitter:site" content="@bloodyowl">
    <meta property="og:image:width" content="1500">
    <meta property="og:image:height" content="777">
    <link rel="shortcut icon" href="/public/assets/images/favicon.png" />
    <title>Generating ReasonReact components with functors | @bloodyowl</title><meta property="og:title" content="Generating ReasonReact components with functors | @bloodyowl" />
  </head>
  <body>
    <div id="root"><style data-emotion-css="189z874 gu50q 1sk4geg 12as1jd inii90 kk4a7b 16cj527 1moa3kc 18av5pk 1jtjujg j1f6xt a7hgs6 1fo1i9a w5sbsl smd49w 1dci6px gghbgz 18z74vx 1qdfdal">pre{padding:10px 20px;background-color:#F4F7F8;overflow-x:auto;-webkit-overflow-scrolling:touch;font-size:14px;}code{font-family:PragmataPro,SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:1;}.hljs-keyword{color:#DA6BB5;}.hljs-constructor{color:#DD792B;}.hljs-identifier{color:#1E9EA7;}.hljs-module-identifier{color:#C84682;}.hljs-string{color:#3BA1C8;}.hljs-comment{color:#aaa;}.hljs-operator{color:#DA6BB5;}.hljs-attribute{color:#4CB877;}table{width:100%;text-align:center;}table thead th{background-color:#E4EBEE;padding:10px 0;}blockquote{opacity:0.6;border-left:4px solid #46515B;margin:0px;padding:0 20px;}@font-face{font-family:Madera;src:url("/public/assets/webfonts/madera.ttf");font-style:normal;font-weight:400;}@font-face{font-family:Madera;src:url("/public/assets/webfonts/madera-bold.ttf");font-style:normal;font-weight:700;}body{padding:0px;margin:0px;background-color:#fff;font-family:Madera,"Helvetica Neue",Helvetica,Arial,sans-serif;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;overflow-x:hidden;}#root{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}html{color:#46515B;font-size:1em;line-height:1.4;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;}*,*:before,*:after{box-sizing:border-box;}</style><style data-emotion-css="1lm8k0f">.css-1lm8k0f{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;}</style><div class="css-1lm8k0f" data-reactroot=""><style data-emotion-css="14wlb7f">.css-14wlb7f{background-color:#E4EBEE;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;}@media (max-width:620px){.css-14wlb7f{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}</style><div class="css-14wlb7f"><style data-emotion-css="48zunz">.css-48zunz{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:stretch;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;color:#46515B;-webkit-text-decoration:none;text-decoration:none;}</style><a href="/" class="css-48zunz"><style data-emotion-css="19jaiin">.css-19jaiin{margin-right:10px;margin-left:20px;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}</style><img class="css-19jaiin" alt="" height="32" src="/public/assets/images/owl.svg" width="32"/><style data-emotion-css="16ucz1n">.css-16ucz1n{padding:20px 20px 23px 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div aria-level="1" class="css-16ucz1n" role="heading"><style data-emotion-css="x6blf3">.css-x6blf3{font-weight:700;margin-right:10px;white-space:nowrap;}</style><div class="css-x6blf3">Matthias Le Brun</div><div>@bloodyowl</div></div></a><style data-emotion-css="7nltf6">.css-7nltf6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (max-width:620px){.css-7nltf6{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;background-color:#D4E1E6;}}</style><div class="css-7nltf6"><style data-emotion-css="143gsgu">.css-143gsgu{padding:20px 20px 23px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-text-decoration:none;text-decoration:none;color:#46515B;text-align:center;font-weight:700;}@media (max-width:620px){.css-143gsgu{-webkit-flex-basis:33.333%;-ms-flex-preferred-size:33.333%;flex-basis:33.333%;padding:10px 20px 13px;}}</style><a href="/blog/" class="css-143gsgu">Blog</a><style data-emotion-css="1o16z30">.css-1o16z30{padding:20px 20px 23px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-text-decoration:none;text-decoration:none;color:#46515B;text-align:center;}@media (max-width:620px){.css-1o16z30{-webkit-flex-basis:33.333%;-ms-flex-preferred-size:33.333%;flex-basis:33.333%;padding:10px 20px 13px;}}</style><a href="https://twitter.com/bloodyowl" class="css-1o16z30">Twitter</a><a href="https://github.com/bloodyowl" class="css-1o16z30">GitHub</a></div></div><style data-emotion-css="12z655i">.css-12z655i{max-width:600px;padding:0 10px;margin:20px auto;width:100%;-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="css-12z655i"><style data-emotion-css="sz4xr">.css-sz4xr{margin:0px;margin-bottom:10px;}</style><h1 class="css-sz4xr">Generating ReasonReact components with functors</h1><style data-emotion-css="v7jbmu">.css-v7jbmu{font-size:14px;opacity:0.5;}</style><div class="css-v7jbmu">2019/01/23</div><style data-emotion-css="1nehpz0">.css-1nehpz0{margin-top:40px;font-size:18px;}</style><div class="css-1nehpz0"><p>In JavaScript, React components can either be function or classes. This makes it easy to create functions that return components (factories if you will).</p>
<p>With ReasonReact though, if you want to use them with JSX, components need to be modules containing a <code>make</code> function, which is a much more static construct.</p>
<p>Fortunately, Reason (through OCaml) has a great feature which is called functors. Think of it as a <strong>module function</strong>: it <strong>takes a module as parameter and returns a module</strong>.</p>
<h2>The syntax</h2>
<pre><code class="language-reason"><span class="hljs-keyword">module</span> <span class="hljs-module-identifier">Make</span> = (<span class="hljs-module-identifier">Param</span>: <span class="hljs-module-identifier">ParamType</span>) =&gt; {
  <span class="hljs-comment">/* contents of the module to return */</span>
};
</code></pre>
<p>Let's define a <code>ParamType</code> first:</p>
<pre><code class="language-reason"><span class="hljs-keyword">module</span> <span class="hljs-keyword">type</span> <span class="hljs-module-identifier">ParamType</span> = {
  <span class="hljs-keyword">type</span> t;
  <span class="hljs-keyword">let</span> name: string;
  <span class="hljs-keyword">let</span> render: t =&gt; <span class="hljs-module-identifier">React</span>.reactElement;
};
</code></pre>
<p>Now, let's create our functor. The following example is very short and now really useful, its goal is simply to show the syntax. Where functors shine is with more complicated components, where you just want to write a simple configuration to generate a component (e.g. big virtualised, paginated lists, sortables etc.)</p>
<pre><code class="language-reason"><span class="hljs-keyword">module</span> <span class="hljs-module-identifier">Make</span> = (<span class="hljs-module-identifier">Param</span>: <span class="hljs-module-identifier">ParamType</span>) =&gt; {
  <span class="hljs-keyword">type</span> state = {
    value: <span class="hljs-module-identifier">Param</span>.t,
  };
  <span class="hljs-keyword">let</span> component = <span class="hljs-module-identifier">React</span>.reducerComponent(<span class="hljs-string">"Demo"</span> <span class="hljs-operator">++</span> <span class="hljs-module-identifier">Param</span>.name);
  <span class="hljs-keyword">let</span> make = (~value: <span class="hljs-module-identifier">Param</span>.t, _) =&gt; {
    <span class="hljs-operator">...</span>component,
    initialState: () =&gt; {value: value},
    reducer: ((), _state) =&gt; <span class="hljs-module-identifier">React</span>.<span class="hljs-constructor">NoUpdate</span>,
    render: ({state}) =&gt;
      &lt;div style={<span class="hljs-module-identifier">ReactDOMRe</span>.<span class="hljs-module-identifier">Style</span>.make(~fontSize=<span class="hljs-string">"32px"</span>, ())}&gt;
        <span class="hljs-comment">/* some markup */</span>
         {<span class="hljs-module-identifier">Param</span>.render(state.value)} &lt;/div&gt;,
  };
};
</code></pre>
<p>Now, in order to create a component, we just have to create a module with <code>Make</code>:</p>
<pre><code class="language-reason"><span class="hljs-keyword">module</span> <span class="hljs-module-identifier">IntValue</span> =
  <span class="hljs-module-identifier">Make</span>({
    <span class="hljs-keyword">type</span> t = int;
    <span class="hljs-keyword">let</span> name = <span class="hljs-string">"Int"</span>;
    <span class="hljs-keyword">let</span> render = x =&gt; x<span class="hljs-operator">-&gt;</span>string_of_int<span class="hljs-operator">-&gt;</span><span class="hljs-module-identifier">React</span>.string;
  });

<span class="hljs-module-identifier">ReactDOMRe</span>.renderToElementWithId(&lt;<span class="hljs-module-identifier">IntValue</span> value=<span class="hljs-number">2</span> /&gt;, <span class="hljs-string">"preview"</span>);
</code></pre>
<p><a href="https://reasonml.github.io/en/try?rrjsx=true&amp;reason=LYewJgrgNgpgBAFwJ4Ad4AUCGAnTwAqq8AvHAN4BQciRiA3FXLAnAHZ4wBccAzgtgEtWAcwbVmcbDFZgY2bi2IA+OACUYmHiFbrMAYwQA6KfoQBRWMGkIGAXwYVQkWHACymANYk4ACiy5gbn88QjQASjhlckZkNF4ETARvMgA3TCgILjhg4EMEe0YJPRBgFG1rSLUNLR0NA2MYSD05AGESstZrHwAiABEYUG64AGph7Jw8Q3YrMLEmGBZgT28fAD80jKycvIAaOAB9CKjKampDc+LS8tYEHcZqIQEEAXSAZQSk7h8jlVT0zO4G0ytjup0kjQgzXkvm+e32fESMB+VU02l09QAciAAKooMCI0GnKQyORfMgIpK2H73U4AHjAAhS8SQsGIZHRCF6AHlXOpDO8WTBDEsvGsAGbaBCvAQALxgxG6AGYAEwoAAe3T23zCtiUNLBAHoAFS8ErwJbYDwQFBwI0G-VgsjbYmybA+ClCoFI2xwWkGhkpJSEgoFJzQeAASRuADV-iRGO5RSdTrF4Io4EIbDSJNNvN0owhunNxAtwSTsJU1ZEVGqALRKPiCET7EBi-aZ+u6GocwyNoSiRhUhwc7m8oUuuT4EAWAbWADqTwAFhGwD5aQXY5s4F7iMq4Aag3BuigpCkBDAAO7dWYUIA">Test it on the ReasonML playground</a></p>
</div><style data-emotion-css="sq4ju6">.css-sq4ju6{padding:10px 0;}</style><div class="css-sq4ju6"><div class="BeOpWidget"></div></div></div><style data-emotion-css="18aspvx">.css-18aspvx{background-color:#46515B;color:#fff;text-align:center;padding:20px;font-size:14px;}</style><div class="css-18aspvx">Copyright 2019 - Matthias Le Brun</div></div></div><script id="data">window.initialData = [{"key":"2019-01-23-generating-reason-react-components-with-functors","value":[[["Generating ReasonReact components with functors","2019-01-23T00:00:00.000Z","\u003cp>In JavaScript, React components can either be function or classes. This makes it easy to create functions that return components (factories if you will).\u003c/p>\n\u003cp>With ReasonReact though, if you want to use them with JSX, components need to be modules containing a \u003ccode>make\u003c/code> function, which is a much more static construct.\u003c/p>\n\u003cp>Fortunately, Reason (through OCaml) has a great feature which is called functors. Think of it as a \u003cstrong>module function\u003c/strong>: it \u003cstrong>takes a module as parameter and returns a module\u003c/strong>.\u003c/p>\n\u003ch2>The syntax\u003c/h2>\n\u003cpre>\u003ccode class=\"language-reason\">\u003cspan class=\"hljs-keyword\">module\u003c/span> \u003cspan class=\"hljs-module-identifier\">Make\u003c/span> = (\u003cspan class=\"hljs-module-identifier\">Param\u003c/span>: \u003cspan class=\"hljs-module-identifier\">ParamType\u003c/span>) =&gt; {\n  \u003cspan class=\"hljs-comment\">/* contents of the module to return */\u003c/span>\n};\n\u003c/code>\u003c/pre>\n\u003cp>Let's define a \u003ccode>ParamType\u003c/code> first:\u003c/p>\n\u003cpre>\u003ccode class=\"language-reason\">\u003cspan class=\"hljs-keyword\">module\u003c/span> \u003cspan class=\"hljs-keyword\">type\u003c/span> \u003cspan class=\"hljs-module-identifier\">ParamType\u003c/span> = {\n  \u003cspan class=\"hljs-keyword\">type\u003c/span> t;\n  \u003cspan class=\"hljs-keyword\">let\u003c/span> name: string;\n  \u003cspan class=\"hljs-keyword\">let\u003c/span> render: t =&gt; \u003cspan class=\"hljs-module-identifier\">React\u003c/span>.reactElement;\n};\n\u003c/code>\u003c/pre>\n\u003cp>Now, let's create our functor. The following example is very short and now really useful, its goal is simply to show the syntax. Where functors shine is with more complicated components, where you just want to write a simple configuration to generate a component (e.g. big virtualised, paginated lists, sortables etc.)\u003c/p>\n\u003cpre>\u003ccode class=\"language-reason\">\u003cspan class=\"hljs-keyword\">module\u003c/span> \u003cspan class=\"hljs-module-identifier\">Make\u003c/span> = (\u003cspan class=\"hljs-module-identifier\">Param\u003c/span>: \u003cspan class=\"hljs-module-identifier\">ParamType\u003c/span>) =&gt; {\n  \u003cspan class=\"hljs-keyword\">type\u003c/span> state = {\n    value: \u003cspan class=\"hljs-module-identifier\">Param\u003c/span>.t,\n  };\n  \u003cspan class=\"hljs-keyword\">let\u003c/span> component = \u003cspan class=\"hljs-module-identifier\">React\u003c/span>.reducerComponent(\u003cspan class=\"hljs-string\">\"Demo\"\u003c/span> \u003cspan class=\"hljs-operator\">++\u003c/span> \u003cspan class=\"hljs-module-identifier\">Param\u003c/span>.name);\n  \u003cspan class=\"hljs-keyword\">let\u003c/span> make = (~value: \u003cspan class=\"hljs-module-identifier\">Param\u003c/span>.t, _) =&gt; {\n    \u003cspan class=\"hljs-operator\">...\u003c/span>component,\n    initialState: () =&gt; {value: value},\n    reducer: ((), _state) =&gt; \u003cspan class=\"hljs-module-identifier\">React\u003c/span>.\u003cspan class=\"hljs-constructor\">NoUpdate\u003c/span>,\n    render: ({state}) =&gt;\n      &lt;div style={\u003cspan class=\"hljs-module-identifier\">ReactDOMRe\u003c/span>.\u003cspan class=\"hljs-module-identifier\">Style\u003c/span>.make(~fontSize=\u003cspan class=\"hljs-string\">\"32px\"\u003c/span>, ())}&gt;\n        \u003cspan class=\"hljs-comment\">/* some markup */\u003c/span>\n         {\u003cspan class=\"hljs-module-identifier\">Param\u003c/span>.render(state.value)} &lt;/div&gt;,\n  };\n};\n\u003c/code>\u003c/pre>\n\u003cp>Now, in order to create a component, we just have to create a module with \u003ccode>Make\u003c/code>:\u003c/p>\n\u003cpre>\u003ccode class=\"language-reason\">\u003cspan class=\"hljs-keyword\">module\u003c/span> \u003cspan class=\"hljs-module-identifier\">IntValue\u003c/span> =\n  \u003cspan class=\"hljs-module-identifier\">Make\u003c/span>({\n    \u003cspan class=\"hljs-keyword\">type\u003c/span> t = int;\n    \u003cspan class=\"hljs-keyword\">let\u003c/span> name = \u003cspan class=\"hljs-string\">\"Int\"\u003c/span>;\n    \u003cspan class=\"hljs-keyword\">let\u003c/span> render = x =&gt; x\u003cspan class=\"hljs-operator\">-&gt;\u003c/span>string_of_int\u003cspan class=\"hljs-operator\">-&gt;\u003c/span>\u003cspan class=\"hljs-module-identifier\">React\u003c/span>.string;\n  });\n\n\u003cspan class=\"hljs-module-identifier\">ReactDOMRe\u003c/span>.renderToElementWithId(&lt;\u003cspan class=\"hljs-module-identifier\">IntValue\u003c/span> value=\u003cspan class=\"hljs-number\">2\u003c/span> /&gt;, \u003cspan class=\"hljs-string\">\"preview\"\u003c/span>);\n\u003c/code>\u003c/pre>\n\u003cp>\u003ca href=\"https://reasonml.github.io/en/try?rrjsx=true&amp;reason=LYewJgrgNgpgBAFwJ4Ad4AUCGAnTwAqq8AvHAN4BQciRiA3FXLAnAHZ4wBccAzgtgEtWAcwbVmcbDFZgY2bi2IA+OACUYmHiFbrMAYwQA6KfoQBRWMGkIGAXwYVQkWHACymANYk4ACiy5gbn88QjQASjhlckZkNF4ETARvMgA3TCgILjhg4EMEe0YJPRBgFG1rSLUNLR0NA2MYSD05AGESstZrHwAiABEYUG64AGph7Jw8Q3YrMLEmGBZgT28fAD80jKycvIAaOAB9CKjKampDc+LS8tYEHcZqIQEEAXSAZQSk7h8jlVT0zO4G0ytjup0kjQgzXkvm+e32fESMB+VU02l09QAciAAKooMCI0GnKQyORfMgIpK2H73U4AHjAAhS8SQsGIZHRCF6AHlXOpDO8WTBDEsvGsAGbaBCvAQALxgxG6AGYAEwoAAe3T23zCtiUNLBAHoAFS8ErwJbYDwQFBwI0G-VgsjbYmybA+ClCoFI2xwWkGhkpJSEgoFJzQeAASRuADV-iRGO5RSdTrF4Io4EIbDSJNNvN0owhunNxAtwSTsJU1ZEVGqALRKPiCET7EBi-aZ+u6GocwyNoSiRhUhwc7m8oUuuT4EAWAbWADqTwAFhGwD5aQXY5s4F7iMq4Aag3BuigpCkBDAAO7dWYUIA\">Test it on the ReasonML playground\u003c/a>\u003c/p>\n"]]],"height":1,"left":null,"right":null},0]</script>
    <script>
      window.beOpAsyncInit = function() {
        BeOpSDK.init({
          account: "556e1d2772a6b60100844051"
        });
        BeOpSDK.watch();
      };
    </script>
    <script defer src="https://widget.beop.io/sdk.js"></script>
  <script type="text/javascript" src="/app.65a89bd79597a95ebc87.js" defer></script></body>
</html>
